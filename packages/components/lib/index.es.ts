import{useEffect as e,useRef as n,createElement as t,useState as i,useContext as r}from"react";import o from"react-window-infinite-loader";import{FixedSizeList as l}from"react-window";import c,{css as a}from"styled-components";import{transparentize as s}from"polished";import{jsx as d,jsxs as h}from"react/jsx-runtime";import{space as u,color as p}from"styled-system";import{EngineContext as f}from"@motor-js/engine";import{ThemeContext as m,defaultTheme as g}from"@motor-js/theme";import x from"prop-types";function b(){return(b=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}function k(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n.indexOf(t=o[i])>=0||(r[t]=e[t]);return r}function w(e,n){return n||(n=e.slice(0)),e.raw=n,e}var v,y,S,z=a(v||(v=w(["\n  border: ",";\n  font-size:  ",";\n  font-family: ",";\n  position: relative;\n  width: ",";\n"])),function(e){return e.theme.filter.border},function(e){return e.theme.filter.size[e.size].fontSize},function(e){return e.theme.fontFamily},function(e){return e.width+"px"});a(y||(y=w(["\n  background-color: ",";\n"])),function(e){return"A"===e.selected?e.theme.colors.gray100:""});var C,L,H,I,O,j,N,D,P,T,W,q,E,R,A,K,B,F,M=c.svg(S||(S=w(["\n  stroke-width: ",";\n  stroke: ",";\n  height: ",";\n  width: ",";\n  viewbox: ",";\n  stroke-linejoin: join;\n  stroke-linecap: round; \n  fill: none;\n  display: flex;\n  fill: none;\n  display: flex;\n"])),function(e){return e.strokeWidth},function(e){return e.strokeColor},function(e){return e.height},function(e){return e.width},function(e){return e.viewbox}),G=c.div(C||(C=w(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background-color: ",";\n  }\n  cursor: pointer;\n"])),function(e){return s(.92,e.theme.colors[e.colorTheme][500])}),J=c.div(L||(L=w(["\n  ",";\n  shadow: ",";\n  margin-top: 10px;\n  border-radius:  ",";\n"])),z,function(e){return e.theme.shadows.input},function(e){return e.theme.filter.borderRadius}),Q=c.div(H||(H=w(["\n  ",";\n  margin-top: 10px;\n"])),z),U=c.input.attrs({type:"checkbox"})(I||(I=w(["\n  // Hide checkbox visually but remain accessible to screen readers.\n  // Source: https://polished.js.org/docs/#hidevisually\n  border: 0;\n  clip: rect(0 0 0 0);\n  clippath: inset(50%);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n"]))),V=c.div(O||(O=w(["\n  display: inline-block;\n  vertical-align: middle;\n  width: 14px;\n  height: 14px;\n  margin: 0px 5px;\n  background: ",";\n  border-radius: 4px;\n  transition: all 150ms;\n  border: 1px solid ",";\n\n  ",":focus + & {\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  "," {\n    visibility: ","\n  }\n"])),function(e){return"S"===e.selected?e.theme.colors[e.colorTheme][500]:"white"},function(e){return"S"===e.selected?e.theme.colors.brand[500]:e.theme.colors.gray[300]},U,function(e){return e.theme.colors.brand[400]},M,function(e){return"S"===e.selected?"visible":"hidden"}),X=c.div(j||(j=w(["\n  display: flex;\n  align-items: center;\n"]))),Y=c.span(N||(N=w(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]))),Z=function(){return d(M,{viewBox:"0 0 24 24",strokeWidth:3,strokeColor:"white",children:d("polyline",{points:"20 6 9 17 4 12"})})},$=function(e){var n=e.className,t=e.selected,i=k(e,["className","checked","selected"]);return h(X,b({className:n},i,{children:[d(U,b({selected:t},i)),d(V,b({},i,{selected:t,children:d(Z,{})}))]}))},_=function(e){var n=e.isNextPageLoading,t=void 0!==n&&n,i=e.items,r=e.loadNextPage,c=e.numberOfItems,a=e.pageHeight,s=e.dropHeight,u=e.handleSelectCallback,p=e.size,f=k(e,["isNextPageLoading","items","loadNextPage","numberOfItems","pageHeight","dropHeight","handleSelectCallback","size"]),m=b({},f).theme.filter.size[p].itemHeight,g=i.length<c,x=g?a+1:a,w=function(e){return!g||e<a},v=function(e){var n,t,r,o=e.index,l=e.style;return w(o)&&0!=i.length&&null!=i[o]?(n=i[o].text,t=i[o],r=i[o].state):(n="Loading...",t="",r=""),d("div",{className:"drop-item",children:i.length>0&&h(G,b({className:"drop-item",style:l,onClick:function(){return function(e){return u(e)}(t)},selected:r},f,{children:[d($,b({className:"drop-item",selected:r},f)),d(Y,b({className:"drop-item"},f,{children:n}))]}))})};return d(o,{isItemLoaded:w,itemCount:x,loadMoreItems:t?function(){}:r,threshold:80,children:function(e){return i.length>0?d(J,b({size:p},f,{children:d(l,{className:"list",itemCount:x,onItemsRendered:e.onItemsRendered,ref:e.ref,height:s,width:"100%",itemSize:m,children:v})})):d(Q,b({size:p},f,{children:"No results found."}))}})},ee=c.div(D||(D=w(["\n  ",";\n  ",";\n  font-size: ",";\n"])),u,p,function(e){return e.theme.filter.size[e.size].fontSize}),ne=c.div(P||(P=w(["\n  padding: 2px 6px;\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n"]))),te=c.div(T||(T=w(["\n  display: flex;\n  flexDirection: row;\n  border-radius: ",";\n  border: ",";\n  &:hover {\n    border:  ",";\n  }\n\n  &:focus-within {\n    border: 1px solid ",";\n    outline: none;\n  }\n\n"])),function(e){return e.theme.filter.borderRadius},function(e){return e.theme.filter.border},function(e){return e.theme.filter.borderHovered},function(e){return e.theme.colors[e.colorTheme][500]}),ie=c.div(W||(W=w(["\n  display: grid;\n  flex: 1 1 0%;\n  flex-wrap: wrap;\n\n"]))),re=c.input(q||(q=w(["\n  border: none;\n  border-radius: ",";\n  font-size: ",";\n  margin: 2px;\n  outline: 0px !important;\n  width: 100%;\n  padding: 4px 0px;\n"])),function(e){return e.theme.filter.borderRadius},function(e){return e.theme.filter.size[e.size].fontSize});c.div(E||(E=w([" \n\n"])));var oe,le=c.span(R||(R=w(["\n  display: flex;\n  align-items: center;\n  padding: 0px 0px 0px 4px;\n  margin: 2px;\n  font-size: ",";\n  border-radius:  ",";\n  background-color:  ",";\n  color: ",";\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"])),function(e){return e.theme.filter.size[e.size].fontSize},function(e){return e.theme.filter.borderRadius},function(e){return e.theme.colors.gray[200]},function(e){return e.theme.colors.black}),ce=c.span(A||(A=w(["\n  display: flex;\n  align-items: center;\n  padding: 0px 0px 0px 8px;\n  margin: 2px;\n  font-size: ",";\n  color: ",";\n  white-space: nowrap;\n"])),function(e){return e.theme.filter.size[e.size].fontSize},function(e){return e.theme.colors.black}),ae=c.button(K||(K=w(["\n  display: flex;\n  align-items: center;\n  height: 100%;\n  border: none;\n  background-color: unset;\n  border: none;\n  cursor: pointer;\n  color: ",";\n  border-radius: 0px 5px 5px 0px;\n  padding: 0px 4px 0px 2px;\n\n  &:hover {\n    background-color: ",";\n  }\n"])),function(e){return e.theme.colors.black},function(e){return s(.3,e.theme.colors[e.colorTheme][500])}),se=c.span(B||(B=w(["\n  padding: 2px 8px 2px 2px;\n  max-width: 100px;\n  overflow: hidden;\n  font-size: 85%;\n  white-space: nowrap;\n  text-overflow:ellipsis;\n"]))),de=c.div(F||(F=w(["\n  display: flex;\n  align-items: center;\n  margin-right: 4px\n"])));c.svg(oe||(oe=w(["\n  fill: none;\n  stroke: black;\n  stroke-width: 2px;\n  display: flex;\n  height: 18px;\n  width: 18px;\n  stroke-linecap:round; \n  stroke-linejoin: join;\n"])));var he,ue=function(e){return h(M,b({viewBox:"0 0 24 24"},{stroke:e.stroke,strokeWidth:e.strokeWidth,height:e.height,width:e.width},{children:[d("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),d("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}))},pe=c.svg(he||(he=w(["\n  fill: none;\n  stroke: black;\n  stroke-width: 1px;\n  display: flex;\n  height: 18px;\n  width: 18px;\n  stroke-linecap:round; \n  stroke-linejoin: join;\n"]))),fe=function(){return d(pe,{viewBox:"0 0 24 24",children:d("polyline",{points:"6 9 12 15 18 9"})})},me=function(e){var i,r=e.selectionsLabels,o=e.selectionLabelLimit,l=e.numberOfSelections,c=e.numberOfItems,a=e.handleKeyDownCallback,s=e.handleSearchCallback,u=e.handleInputSelectCallback,p=e.handleIconSelectCallback,f=e.handleDeselectCallback,m=e.deselectAllCallback,g=e.placeholderState,x=e.singleSelection,w=e.size,v=k(e,["selectionsLabels","selectionLabelLimit","numberOfSelections","numberOfItems","handleKeyDownCallback","handleSearchCallback","handleInputSelectCallback","handleIconSelectCallback","handleDeselectCallback","deselectAllCallback","placeholderState","singleSelection","size"]),y=[i=n(null),function(){i.current&&i.current.focus()}],S=y[0],z=y[1];return h(te,b({onClick:function(){return z()}},v,{children:[h(ne,b({},v,{children:[x&&r&&r.length>0?d(ce,b({size:w},v,{children:r[0].text})):!x&&r&&o<l?h(le,b({size:w},v,{children:[d(se,b({},v,{children:l+" of "+c})),d(ae,b({},v,{onClick:m,children:d(ue,{stroke:"black",strokeWidth:1,height:"14px",width:"14px"})}))]})):r&&r.map(function(e,n){return t(le,b({},v,{size:w,key:e.key}),d(se,b({},v,{children:e.text})),d(ae,b({},v,{onClick:function(){return f(e)},children:d(ue,{stroke:"black",strokeWidth:1,height:"14px",width:"14px",padding:"10px"})})))}),d(ie,b({},v,{children:d(re,b({ref:S,size:w,onSelect:u,onChange:function(e){return function(e){s(e)}(e)},onKeyDown:a,placeholder:g},v))}))]})),h("div",{style:{display:"flex",flexDirection:"row"},children:[d(de,{onClick:m,children:l>0&&d(ue,{stroke:"black",strokeWidth:1,height:"14px",width:"14px"})}),d(de,b({},v,{onClick:p,children:d(fe,{stroke:"black",strokeWidth:1,height:"14px",width:"14px"})}))]})]}))};function ge(t){var r=t.listData,o=t.motorListProps,l=t.singleSelection,c=t.dropHeight,a=void 0===c?"200px":c,s=t.pageHeight,u=t.selectionLabelLimit,p=t.placeholder,f=t.onSelectionChange,m=t.size,g=k(t,["engine","engineError","listData","motorListProps","singleSelection","dropHeight","pageHeight","selectionLabelLimit","placeholder","onSelectionChange","defaultSelections","size"]),x=n(),w=i(!1),v=w[0],y=w[1],S=i(null),z=S[0],C=S[1],L=i(null),H=L[0],I=L[1],O=i(s),j=O[0],N=O[1],D=i(p),P=D[0],T=D[1];e(function(){r&&N(r.length)},[r]);var W,q,E,R=o.layout,A=o.select,K=o.selections,B=o.searchList,F=o.confirmListSearch,M=o.clearSelections,G=o.changePage,J=R&&R.qListObject.qSize.qcy,Q=parseInt(a,10);e(function(){K&&C(K.slice(0,u)),K&&I(K.length)},[K]),e(function(){T(H&&0!==H?"":p)},[H]),W=x,q=function(){v&&(y(!1),G({qTop:0,qHeight:s}))},E=function(e){W.current&&!W.current.contains(e.target)&&q()},e(function(){return document.addEventListener("click",E),function(){document.removeEventListener("click",E)}});var U=b({selectionsLabels:z,numberOfSelections:H,selectionLabelLimit:u,numberOfItems:J,handleKeyDownCallback:function(e){"Enter"===e.key&&F()},handleSearchCallback:function(e){return B(e.target.value)},handleInputSelectCallback:function(){return y(!0)},handleIconSelectCallback:function(){return y(!v)},handleDeselectCallback:function(e){return A([e.key],!0)},deselectAllCallback:function(){M()},placeholderState:P,singleSelection:l,selections:K,size:m},g),V=b({items:r,loadNextPage:function(){return G({qHeight:s+j})},pageHeight:j||s,numberOfItems:J,dropHeight:Q,handleSelectCallback:function(e){T(""),A([e.key],!l),f()},size:m},g);return h(ee,b({ref:x,size:m},g,{children:[d(me,b({},U)),v&&d(_,b({},V))]}))}function xe(e){var n=b({},e),t=r(m)||g,i=r(f);return d(ge,b({engine:i.engine,theme:t,engineError:i.engineError},n))}xe.propTypes={listData:x.array,colorTheme:x.oneOf(["brand","gray","red","orange","yellow","green","teal","pink","blue","cyan","purple"]),singleSelection:x.bool,pageHeight:x.number,selectionLabelLimit:x.number,size:x.oneOf(["small","medium","large"]),placeholder:x.string,onSelectionChange:x.func},xe.defaultProps={colorTheme:"brand",singleSelection:!1,pageHeight:50,selectionLabelLimit:5,size:"medium",placeholder:"Select..",onSelectionChange:function(){}};export{xe as Filter};
//# sourceMappingURL=index.es.ts.map
