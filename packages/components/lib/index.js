var e=require("react"),n=require("react-window-infinite-loader"),t=require("react-window"),i=require("@motor-js/theme"),r=require("styled-components"),l=require("polished"),o=require("react/jsx-runtime"),a=require("prop-types");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c,d,u=s(n),h=s(r),f=s(a);function p(){return(p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}function x(e,n){if(null==e)return{};var t,i,r={},l=Object.keys(e);for(i=0;i<l.length;i++)n.indexOf(t=l[i])>=0||(r[t]=e[t]);return r}function m(e,n){return n||(n=e.slice(0)),e.raw=n,e}var g,b=r.css(c||(c=m(["\n  border: ",";\n  font-size:  ",";\n  font-family: ",";\n  position: relative;\n  width: ",";\n"])),function(e){return e.theme.filter.border},function(e){return e.theme.filter.size[e.size].fontSize},function(e){return e.theme.fontFamily},function(e){return e.width+"px"});r.css(d||(d=m(["\n  background-color: ",";\n"])),function(e){return"A"===e.selected?e.theme.colors.gray100:""});var k,w,v,y,j,S,z,C,L,O,H,I,q,N,R,D,T,P,E,W=h.default.svg(g||(g=m(["\n  stroke-width: ",";\n  stroke: ",";\n  height: ",";\n  width: ",";\n  viewbox: ",";\n  stroke-linejoin: join;\n  stroke-linecap: round; \n  fill: none;\n  display: flex;\n  fill: none;\n  display: flex;\n"])),function(e){return e.strokeWidth},function(e){return e.strokeColor},function(e){return e.height},function(e){return e.width},function(e){return e.viewbox}),A=h.default.div(k||(k=m(["\n  width: 100%;\n  position: absolute;\n  z-index:1000;\n  background-color: white;\n"]))),K=h.default.div.attrs(function(e){var n;switch(e.selected){case"S":case"O":n="";break;case"A":n=e.theme.colors.gray[100];break;case"X":n=e.theme.colors.gray[400];break;default:n=""}return{style:{backgroundColor:n}}})(w||(w=m(["\nwidth: 100%;\ndisplay: flex;\nalign-items: center;\n&:hover {\n  background-color: ",";\n}\ncursor: pointer;\n"])),function(e){return l.transparentize(.92,e.theme.colors[e.colorTheme][500])}),B=h.default.div(v||(v=m(["\n  ",";\n  shadow: ",";\n  margin-top: 10px;\n  border-radius:  ",";\n"])),b,function(e){return e.theme.shadows.input},function(e){return e.theme.filter.borderRadius}),F=h.default.div(y||(y=m(["\n  ",";\n  margin-top: 10px;\n"])),b),V=h.default.input.attrs({type:"checkbox"})(j||(j=m(["\n  // Hide checkbox visually but remain accessible to screen readers.\n  // Source: https://polished.js.org/docs/#hidevisually\n  border: 0;\n  clip: rect(0 0 0 0);\n  clippath: inset(50%);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n"]))),M=h.default.div(S||(S=m(["\n  display: inline-block;\n  vertical-align: middle;\n  width: 14px;\n  height: 14px;\n  margin: 0px 5px;\n  background: ",";\n  border-radius: 4px;\n  transition: all 150ms;\n  border: 1px solid ",";\n\n  ",":focus + & {\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  "," {\n    visibility: ","\n  }\n"])),function(e){return"S"===e.selected?e.theme.colors[e.colorTheme][500]:"white"},function(e){return"S"===e.selected?e.theme.colors[e.colorTheme][500]:e.theme.colors.gray[300]},V,function(e){return e.theme.colors[e.colorTheme][400]},W,function(e){return"S"===e.selected?"visible":"hidden"}),X=h.default.div(z||(z=m(["\n  display: flex;\n  align-items: center;\n"]))),G=h.default.span(C||(C=m(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]))),J=function(){return o.jsx(W,{viewBox:"0 0 24 24",strokeWidth:3,strokeColor:"white",children:o.jsx("polyline",{points:"20 6 9 17 4 12"})})},Q=function(e){var n=e.className,t=e.selected,i=x(e,["className","checked","selected"]);return o.jsxs(X,p({className:n},i,{children:[o.jsx(V,p({selected:t},i)),o.jsx(M,p({},i,{selected:t,children:o.jsx(J,{})}))]}))},U=function(n,r){var l=n.isNextPageLoading,a=void 0!==l&&l,s=n.items,c=n.loadNextPage,d=n.numberOfItems,h=n.pageHeight,f=n.dropHeight,m=n.handleSelectCallback,g=n.size,b=x(n,["isNextPageLoading","items","loadNextPage","numberOfItems","pageHeight","dropHeight","handleSelectCallback","size"]),k=(e.useContext(i.ThemeContext)||i.defaultTheme).filter.size[g].itemHeight,w=s.length<d,v=w?h+1:h,y=function(e){return!w||e<h},j=function(e){var n,t,i,r=e.index,l=e.style;return y(r)&&0!=s.length&&null!=s[r]?(n=s[r].text,t=s[r],i=s[r].state):(n="Loading...",t="",i=""),o.jsx("div",{className:"drop-item",children:s.length>0&&o.jsxs(K,p({className:"drop-item",style:l,onClick:function(){return function(e){return m(e)}(t)},selected:i},b,{children:[o.jsx(Q,p({className:"drop-item",selected:i},b)),o.jsx(G,p({className:"drop-item"},b,{children:n}))]}))})};return o.jsx(A,{ref:r,children:o.jsx(u.default,{isItemLoaded:y,itemCount:v,loadMoreItems:a?function(){}:c,threshold:80,children:function(e){return s.length>0?o.jsx(B,p({size:g},b,{children:o.jsx(t.FixedSizeList,{className:"list",itemCount:v,onItemsRendered:e.onItemsRendered,ref:e.ref,height:f,width:"100%",itemSize:k,children:j})})):o.jsx(F,p({size:g},b,{children:"No results found."}))}})})},Y=e.forwardRef(U),Z=h.default.div(L||(L=m(["\n  ",";\n  ",";\n  position: relative;\n"])),i.space,i.color),$=h.default.div(O||(O=m(["\n  padding: 2px 6px;\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n"]))),_=h.default.div(H||(H=m(["\n  display: flex;\n  flexDirection: row;\n  border-radius: ",";\n  border: ",";\n  &:hover {\n    border:  ",";\n  }\n\n  &:focus-within {\n    border: 1px solid ",";\n    outline: none;\n  }\n"])),function(e){return e.theme.filter.borderRadius},function(e){return e.theme.filter.border},function(e){return e.theme.filter.borderHovered},function(e){return e.theme.colors[e.colorTheme][500]}),ee=h.default.div(I||(I=m(["\n  display: grid;\n  flex: 1 1 0%;\n  flex-wrap: wrap;\n"]))),ne=h.default.input(q||(q=m(["\n  border: none;\n  border-radius: ",";\n  font-size: ",";\n  margin: 2px;\n  outline: 0px !important;\n  width: 100%;\n  padding: 4px 0px;\n"])),function(e){return e.theme.filter.borderRadius},function(e){return e.theme.filter.size[e.size].fontSize});h.default.div(N||(N=m([" \n\n"])));var te,ie=h.default.span(R||(R=m(["\n  display: flex;\n  align-items: center;\n  padding: 0px 0px 0px 4px;\n  margin: 2px;\n  font-size: ",";\n  border-radius:  ",";\n  background-color:  ",";\n  color: ",";\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"])),function(e){return e.theme.filter.size[e.size].fontSize},function(e){return e.theme.filter.borderRadius},function(e){return e.theme.colors.gray[200]},function(e){return e.theme.colors.black}),re=h.default.span(D||(D=m(["\n  display: flex;\n  align-items: center;\n  padding: 0px 0px 0px 8px;\n  margin: 2px;\n  font-size: ",";\n  color: ",";\n  white-space: nowrap;\n"])),function(e){return e.theme.filter.size[e.size].fontSize},function(e){return e.theme.colors.black}),le=h.default.button(T||(T=m(["\n  display: flex;\n  align-items: center;\n  height: 100%;\n  border: none;\n  background-color: unset;\n  border: none;\n  cursor: pointer;\n  color: ",";\n  border-radius: 0px 5px 5px 0px;\n  padding: 0px 4px 0px 2px;\n\n  &:hover {\n    background-color: ",";\n  }\n"])),function(e){return e.theme.colors.black},function(e){return l.transparentize(.3,e.theme.colors[e.colorTheme][500])}),oe=h.default.span(P||(P=m(["\n  padding: 2px 8px 2px 2px;\n  max-width: 100px;\n  overflow: hidden;\n  font-size: 85%;\n  white-space: nowrap;\n  text-overflow:ellipsis;\n"]))),ae=h.default.div(E||(E=m(["\n  display: flex;\n  align-items: center;\n  margin-right: 4px\n"])));h.default.svg(te||(te=m(["\n  fill: none;\n  stroke: black;\n  stroke-width: 2px;\n  display: flex;\n  height: 18px;\n  width: 18px;\n  stroke-linecap:round; \n  stroke-linejoin: join;\n"])));var se,ce=function(e){return o.jsxs(W,p({viewBox:"0 0 24 24"},{stroke:e.stroke,strokeWidth:e.strokeWidth,height:e.height,width:e.width},{children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}))},de=h.default.svg(se||(se=m(["\n  fill: none;\n  stroke: black;\n  stroke-width: 1px;\n  display: flex;\n  height: 18px;\n  width: 18px;\n  stroke-linecap:round; \n  stroke-linejoin: join;\n"]))),ue=function(){return o.jsx(de,{viewBox:"0 0 24 24",children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})},he=function(n){var t,i=n.selectionsLabels,r=n.selectionLabelLimit,l=n.numberOfSelections,a=n.numberOfItems,s=n.handleKeyDownCallback,c=n.handleSearchCallback,d=n.handleInputSelectCallback,u=n.handleIconSelectCallback,h=n.handleDeselectCallback,f=n.deselectAllCallback,m=n.placeholderState,g=n.singleSelection,b=n.size,k=n.searchValue,w=x(n,["selectionsLabels","selectionLabelLimit","numberOfSelections","numberOfItems","handleKeyDownCallback","handleSearchCallback","handleInputSelectCallback","handleIconSelectCallback","handleDeselectCallback","deselectAllCallback","placeholderState","singleSelection","size","searchValue"]),v=[t=e.useRef(null),function(){t.current&&t.current.focus()}],y=v[0],j=v[1];return o.jsxs(_,p({onClick:function(){return j()}},w,{children:[o.jsxs($,p({},w,{onClick:function(){return d()},children:[g&&i&&i.length>0?o.jsx(re,p({size:b},w,{children:i[0].text})):!g&&i&&r<l?o.jsxs(ie,p({size:b},w,{children:[o.jsx(oe,p({},w,{children:l+" of "+a})),o.jsx(le,p({},w,{onClick:f,children:o.jsx(ce,{stroke:"black",strokeWidth:1,height:"14px",width:"14px"})}))]})):i&&i.map(function(n,t){return e.createElement(ie,p({},w,{size:b,key:n.key}),o.jsx(oe,p({},w,{children:n.text})),o.jsx(le,p({},w,{onClick:function(){return h(n)},children:o.jsx(ce,{stroke:"black",strokeWidth:1,height:"14px",width:"14px",padding:"10px"})})))}),o.jsx(ee,p({},w,{children:o.jsx(ne,p({ref:y,size:b,onChange:function(e){return function(e){c(e)}(e)},onKeyDown:s,placeholder:m,value:k},w))}))]})),o.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[o.jsx(ae,{onClick:f,children:l>0&&o.jsx(ce,{stroke:"black",strokeWidth:1,height:"14px",width:"14px"})}),o.jsx(ae,p({},w,{onClick:u,children:o.jsx(ue,{stroke:"black",strokeWidth:1,height:"14px",width:"14px"})}))]})]}))};function fe(n){var t=n.listData,i=n.motorListProps,r=n.singleSelection,l=n.dropHeight,a=void 0===l?"200px":l,s=n.pageHeight,c=n.selectionLabelLimit,d=n.placeholder,u=n.onSelectionChange,h=n.size,f=x(n,["listData","motorListProps","singleSelection","dropHeight","pageHeight","selectionLabelLimit","placeholder","onSelectionChange","defaultSelections","size"]),m=e.useRef(),g=e.useRef(),b=e.useState(!1),k=b[0],w=b[1],v=e.useState(null),y=v[0],j=v[1],S=e.useState(null),z=S[0],C=S[1],L=e.useState(s),O=L[0],H=L[1],I=e.useState(d),q=I[0],N=I[1],R=e.useState(""),D=R[0],T=R[1];e.useEffect(function(){t&&H(t.length)},[t]);var P=i.layout,E=i.select,W=i.endSelections,A=i.beginSelections,K=i.selections,B=i.searchList,F=i.confirmListSearch,V=i.clearSelections,M=i.changePage,X=P&&P.qListObject.qSize.qcy,G=parseInt(a,10);e.useEffect(function(){K&&j(K.slice(0,c)),K&&C(K.length)},[K]),e.useEffect(function(){N(z&&0!==z?"":d)},[z]),function(n,t){var i=n.filterRef,r=n.dropRef,l=function(e){i.current&&!i.current.contains(e.target)&&r.current&&!r.current.contains(e.target)&&k&&(w(!k),T(""),M({qTop:0,qHeight:s}),W(!0))};e.useEffect(function(){return document.addEventListener("click",l,{capture:!0}),function(){document.removeEventListener("click",l,{capture:!0})}})}({filterRef:m,dropRef:g});var J=p({selectionsLabels:y,numberOfSelections:z,selectionLabelLimit:c,numberOfItems:X,handleKeyDownCallback:function(e){"Enter"===e.key&&(F(),T(""))},handleSearchCallback:function(e){T(e.target.value),B(e.target.value)},handleInputSelectCallback:function(){k||(A(),w(!0))},handleIconSelectCallback:function(){k?W(!0):A(),w(!k)},handleDeselectCallback:function(e){E([e.key],!0),T("")},deselectAllCallback:function(){V(),T("")},placeholderState:q,singleSelection:r,selections:K,size:h,searchValue:D},f),Q=p({items:t,loadNextPage:function(){return M({qHeight:s+O})},pageHeight:O||s,numberOfItems:X,dropHeight:G,handleSelectCallback:function(e){N(""),T(""),E([e.key],!r),u()},size:h},f);return o.jsxs(Z,p({ref:m,size:h},f,{children:[o.jsx(he,p({},J)),t&&k&&o.jsx(Y,p({ref:g},Q))]}))}function pe(e){var n=p({},e);return o.jsx(fe,p({},n))}pe.propTypes={listData:f.default.array,colorTheme:f.default.oneOf(["brand","gray","red","orange","yellow","green","teal","pink","blue","cyan","purple"]),singleSelection:f.default.bool,pageHeight:f.default.number,selectionLabelLimit:f.default.number,size:f.default.oneOf(["small","medium","large"]),placeholder:f.default.string,onSelectionChange:f.default.func},pe.defaultProps={colorTheme:"brand",singleSelection:!1,pageHeight:50,selectionLabelLimit:5,size:"medium",placeholder:"Select..",onSelectionChange:function(){}},exports.Filter=pe;
//# sourceMappingURL=index.js.map
